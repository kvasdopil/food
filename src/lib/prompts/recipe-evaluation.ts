export const EVALUATION_PROMPT = [
  "CRITICAL: Content preservation is the MOST IMPORTANT rule. Never suggest changes that would:",
  "  - Remove ingredients, steps, or cooking instructions",
  "  - Eliminate ingredient uses (e.g., if an ingredient appears in multiple steps, ensure all uses are preserved)",
  "  - Change the recipe's cooking method, timing, or essential instructions",
  "  - Remove or consolidate duplicate ingredient entries unless they are truly redundant (e.g., same ingredient with different notes/amounts for different uses should be preserved)",
  "  - Alter the logical flow or completeness of the recipe",
  "",
  "Evaluate the provided recipe YAML against these production rules (formatting rules are secondary to content preservation):",
  " - RECIPE TITLE: The title must ONLY contain the actual name of the meal. It must NOT include descriptive adjectives like 'savory', 'delicious', 'tasty', 'mouthwatering', 'flavorful', 'amazing', 'perfect', 'best', 'authentic', 'homemade', or any other subjective descriptors. The title should be the dish name only (e.g., 'Chicken Tikka Masala' not 'Delicious Savory Chicken Tikka Masala').",
  " - RECIPE DESCRIPTION/SUMMARY: The description must be concise and objective. It should focus on: key ingredients and components, cooking methods (e.g., roasted, grilled, braised, sautéed), main preparation techniques, and distinctive features of the dish. CRITICAL: It must NOT contain subjective language including 'savory', 'delicious', 'tasty', 'mouthwatering', 'appealing', 'flavorful', 'amazing', 'perfect', 'best', 'authentic', 'homemade', or any impressions about flavor/texture. Instead, describe what the dish is and how it's made (e.g., 'Tender chicken pieces simmered in a spiced tomato-based curry with coconut milk, served over basmati rice' rather than 'A delicious and flavorful curry that's sure to impress' or 'Savory pancakes filled with minced meat and mushrooms').",
  " - Use metric measurements with abbreviated units (g, ml, °C) plus tsp/tbsp where helpful. You may use descriptions such as '1 medium' or '2 large' for whole produce, but never revert to Fahrenheit, pounds, ounces, or cups.",
  " - For whole units (tbsp, tsp, pieces, whole items), prefer fractions over decimals: use '1/2' instead of '0.5', '1/4' instead of '0.25', '3/4' instead of '0.75'. Only use decimals for metric measurements (g, ml) when necessary.",
  " - Describe tiny amounts (a drizzle, a pinch) naturally so the instructions do not invent precise measurements for them.",
  " - Mention each ingredient in lowercase within instructions and wrap the first occurrence per step in *asterisks* (e.g., *olive oil*).",
  " - It's acceptable to use descriptive phrases in instructions (e.g., *trimmed green beans*, *minced garlic*) for clarity - you don't need to match ingredient list names exactly.",
  " - Ingredient amounts should not contain parenthetical notes; move contextual details into a `notes` field.",
  " - Instructions should be concise and practical. They should reference the ingredient list, except for common pantry staples (salt, pepper, oil, water, basic seasonings) which may be mentioned without explicit listing.",
  " - Keep ingredient names in the ingredients array lowercase so the UI can highlight them consistently.",
  "",
  "When suggesting fixes:",
  "  - ONLY suggest formatting and structural changes (case, asterisks, note placement)",
  "  - NEVER suggest removing ingredients, steps, or instruction content",
  "  - NEVER suggest changing descriptive phrases in instructions to match ingredient list names exactly (e.g., don't change '*trimmed green beans*' to '*green beans*' or '*minced garlic*' to '*garlic*')",
  "  - If an ingredient appears multiple times (e.g., frozen peas used in filling AND as side dish), preserve ALL uses",
  "  - If splitting or clarifying ingredient entries, ensure the total usage matches the original",
  "",
  "Assess the recipe and return one of:",
  " - If issues exist, list them as Markdown bullets detailing the required change (be specific about ingredient names, steps, or fields). Only suggest fixes that preserve all content.",
  " - If everything already complies, respond with the sentence: `All checks passed. No changes needed.`",
].join("\n");

export function buildEvaluationPrompt(yamlContent: string): string {
  return `${EVALUATION_PROMPT}\n\nCurrent recipe YAML:\n${yamlContent}`;
}
